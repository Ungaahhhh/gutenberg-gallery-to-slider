<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><link rel="stylesheet" href="index.57c7fbd3.css"><style>body{width:75%;margin:0 auto}.sample{margin:0;padding:0;list-style:none}.sample>li{margin:0;padding:0}.sample img{height:25vw}#gutenbergGalleryToSlider figure{margin:0}#gutenbergGalleryToSlider .wp-block-image img{height:25vw}#gutenbergGalleryToSlider figcaption{display:none}pre{word-break:normal;background-color:#f6f8fa;border-radius:5px;padding:8px;line-height:1.45;overflow:auto}hr{margin:48px 0}h2{margin-top:0}.GGToSlider_thumb_item img{height:150px}.fsz-75{font-size:.75rem}</style><title>gutenberg-gallery-to-slider</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-6GPG898JEL"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6GPG898JEL");</script></head><body> <h1>gutenberg-gallery-to-slider の DEMO</h1> <h2>gutenberg-gallery-to-slider</h2> <div id="gutenbergGalleryToSlider"> <figure class="columns-default has-nested-images is-cropped wp-block-gallery wp-block-gallery-1 wp-container-2"> <figure class="size-large wp-block-image"> <img src="01.fca3cd4d.jpg" alt=""> <figcaption></figcaption> </figure> <figure class="size-large wp-block-image"> <img src="02.91434bb9.jpg" alt=""> <figcaption></figcaption> </figure> <figure class="size-large wp-block-image"> <img src="03.2e927094.jpg" alt=""> <figcaption></figcaption> </figure> <figure class="size-large wp-block-image"> <img src="04.d9098aa1.jpg" alt=""> <figcaption></figcaption> </figure> <figure class="size-large wp-block-image"> <img src="05.e8e0abe7.jpg" alt=""> <figcaption></figcaption> </figure> <figure class="size-large wp-block-image"> <img src="06.a8202206.jpg" alt=""> <figcaption></figcaption> </figure> <figure class="size-large wp-block-image"> <img src="07.bcbb85a4.jpg" alt=""> <figcaption></figcaption> </figure> <figure class="size-large wp-block-image"> <img src="08.9060fafb.jpg" alt=""> <figcaption></figcaption> </figure> </figure> </div> <pre><code>const option = {
    scope: '#gutenbergGalleryToSlider',
    target: '.wp-block-gallery',
};</code></pre> <hr> <h2>scroll</h2> <div id="scroll"> <ul class="sample"> <li><img src="01.fca3cd4d.jpg" alt=""></li> <li><img src="02.91434bb9.jpg" alt=""></li> <li><img src="03.2e927094.jpg" alt=""></li> <li><img src="04.d9098aa1.jpg" alt=""></li> <li><img src="05.e8e0abe7.jpg" alt=""></li> <li><img src="06.a8202206.jpg" alt=""></li> <li><img src="07.bcbb85a4.jpg" alt=""></li> <li><img src="08.9060fafb.jpg" alt=""></li> </ul> </div> <pre><code>const option = {
    interval: 4000,
    scope: '#scroll',
    target: 'ul',
};</code></pre> <hr> <h2>fade</h2> <div id="fade"> <ul class="sample"> <li><img src="01.fca3cd4d.jpg" alt=""></li> <li><img src="02.91434bb9.jpg" alt=""></li> <li><img src="03.2e927094.jpg" alt=""></li> <li><img src="04.d9098aa1.jpg" alt=""></li> <li><img src="05.e8e0abe7.jpg" alt=""></li> <li><img src="06.a8202206.jpg" alt=""></li> <li><img src="07.bcbb85a4.jpg" alt=""></li> <li><img src="08.9060fafb.jpg" alt=""></li> </ul> </div> <pre><code>const option = {
    control: { thumb: 'dot' },
    effect: 'fade',
    scope: '#fade',
    target: 'ul',
};</code></pre> <hr> <p class="fsz-75">※訪問状況を把握するために Google アナリティクス を <a href="https://marketingplatform.google.com/about/analytics/terms/jp/">Google アナリティクス利用規約</a> に基づいて使用しています。<br>当ページを利用することで cookie(1st Party) の使用に許可を与えたものとみなします。</p> <script>!function(){function t(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class e{constructor(e){if(t(this,"option",{control:{adjacent:!0,thumb:"image"},effect:"slider",interval:0,scope:"",target:""}),t(this,"storage",{current:0,gallery:[],interval:0,isEffectFirst:!0,itemCount:0,scope:null,target:null,temp:null,thumbItem:null}),t(this,"init",(t=>{t&&(this.option={...this.option,...t}),this.storage.temp=this.getTemp(document,"GGToSlider_temp"),this.storage.scope=this.getSelector(document,this.option.scope),this.storage.target=this.getSelectorAll(this.storage.scope,this.option.target);try{if(!(this.storage.target&&this.storage.target.length>0))throw new Error}catch(t){console.log(`${this.option.scope} or ${this.option.target} が取得できませんでした。`)}})),t(this,"getTemp",((t,e)=>t.getElementById(e).content.cloneNode(!0))),t(this,"getSelector",((t,e)=>t.querySelector(e))),t(this,"getSelectorAll",((t,e)=>t.querySelectorAll(e))),t(this,"setIndex",((t,e,s)=>{const i=this.storage.current;if(this.storage.target){const r=this.storage.target[t],o=this.storage.gallery[t];if(s)switch(s){case"reverse":this.storage.current-=e;break;case"order":this.storage.current=e;break;default:this.storage.current+=e}else this.storage.current+=e;switch(this.storage.current>=this.storage.itemCount?this.storage.current=0:this.storage.current<0&&(this.storage.current=this.storage.itemCount-1),this.option.effect){case"fade":this.storage.isEffectFirst||(r.children[i].classList.remove("fadeIn"),r.children[i].classList.add("fadeOut"),r.children[this.storage.current].classList.remove("fadeOut"),r.children[this.storage.current].classList.add("fadeIn")),this.storage.isEffectFirst=!1;break;case"slider":r.scrollLeft=r.offsetWidth*this.storage.current,setTimeout((()=>{if(this.option.control&&!0===this.option.control.adjacent){const t=this.getSelector(o,".prev"),e=this.getSelector(o,".next");t.classList.remove("disabled"),e.classList.remove("disabled")}const t=this.getSelector(o,".GGToSlider_thumb");t&&t.classList.remove("disabled")}),400)}if(this.storage.thumbItem){for(let t=0;t<this.storage.thumbItem.length;t++){const e=this.storage.thumbItem.item(t);e&&e.classList.remove("active")}const t=this.storage.thumbItem.item(this.storage.current);t&&t.classList.add("active")}}})),t(this,"setInterval",(()=>{this.storage.interval=window.setInterval((()=>{if(this.storage.target&&this.storage.target.length>0)for(let t=0;t<this.storage.target.length;t++)this.setIndex(t,1)}),this.option.interval)})),t(this,"abortInterval",(()=>{clearInterval(this.storage.interval)})),this.init(e),this.storage.target&&this.storage.target.length>0)for(let t=0;t<this.storage.target.length;t++){let e=this.storage.target.item(t);if(e){e.outerHTML=`<div class="GGToSlider"><div class="GGToSlider_inner">${e.outerHTML}</div></div>`,this.init(),e=this.storage.target.item(t),this.storage.gallery[t]=this.getSelectorAll(this.storage.scope,".GGToSlider").item(t);const s=this.storage.gallery[t];if(e&&s){this.option.effect&&s.classList.add(this.option.effect);const i=this.getSelector(this.storage.gallery[t],".GGToSlider_inner");if(e.classList.add("GGToSlider_target"),this.storage.itemCount=e.childElementCount,this.option.control&&"dot"===this.option.control.thumb){const s=this.getTemp(this.storage.temp,"GGToSlider_thumb_temp"),r=this.getSelector(s,".GGToSlider_thumb");r.classList.add(this.option.control.thumb);for(let s=0;s<this.storage.itemCount;s++){e.children[s].classList.add("GGToSlider_target_item");const i=this.getTemp(this.storage.temp,"GGToSlider_thumb_item_temp"),o=this.getSelector(i,".GGToSlider_thumb_item");r.appendChild(o),o.addEventListener("click",(e=>{r.classList.add("disabled"),this.setIndex(t,s,"order")}))}i.appendChild(r),this.storage.thumbItem=this.getSelectorAll(this.storage.gallery[t],".GGToSlider_thumb_item")}else if(this.option.control&&"image"===this.option.control.thumb){const r=this.getTemp(this.storage.temp,"GGToSlider_thumb_temp"),o=this.getSelector(r,".GGToSlider_thumb");o.classList.add(this.option.control.thumb);for(let s=0;s<this.storage.itemCount;s++){const i=e.children[s];i.classList.add("GGToSlider_target_item");const r=this.getTemp(this.storage.temp,"GGToSlider_thumb_item_temp"),a=this.getSelector(r,".GGToSlider_thumb_item"),l=this.getTemp(this.storage.temp,"GGToSlider_thumb_img_temp"),n=this.getSelector(l,"img");n.src=this.getSelector(i,"img").src,a.appendChild(n),o.appendChild(a),a.addEventListener("click",(e=>{o.classList.add("disabled"),this.setIndex(t,s,"order")}))}if(s.appendChild(o),this.storage.thumbItem=this.getSelectorAll(s,".GGToSlider_thumb_item"),!0===this.option.control.adjacent){const e=this.getTemp(this.storage.temp,"GGToSlider_control_temp"),s=this.getSelector(e,".prev"),r=this.getSelector(e,".next");s.dataset.targetIndex=String(t),r.dataset.targetIndex=String(t),s.addEventListener("click",(e=>{s.classList.add("disabled"),this.setIndex(t,-1)})),r.addEventListener("click",(e=>{r.classList.add("disabled"),this.setIndex(t,1)})),i.appendChild(e)}}if("fade"===this.option.effect)for(let t=0;t<this.storage.itemCount;t++){const r=e.children[t];0===t&&r.classList.add("current"),r.addEventListener("animationend",(t=>{const e=t.target;if(e.classList.contains("fadeOut")&&e.classList.remove("fadeOut"),e.classList.contains("current")&&e.classList.remove("current"),e.classList.contains("fadeIn")&&(e.classList.remove("fadeIn"),e.classList.add("current")),this.option.control&&!0===this.option.control.adjacent){const t=this.getSelector(i,".prev"),e=this.getSelector(i,".next");t.classList.remove("disabled"),e.classList.remove("disabled")}this.getSelector(s,".GGToSlider_thumb").classList.remove("disabled")}))}this.setIndex(t,0,"order"),this.option.interval&&this.option.interval>0&&(this.setInterval(),s.addEventListener("mouseenter",(()=>{this.abortInterval()})),s.addEventListener("mouseleave",(()=>{this.setInterval()})))}}}}}window.addEventListener("DOMContentLoaded",(async()=>{const t=await fetch("./template.html"),s=await t.text(),i=document.createElement("div");i.innerHTML=s,document.body.appendChild(i);new e({scope:"#gutenbergGalleryToSlider",target:".wp-block-gallery"});new e({interval:4e3,scope:"#scroll",target:"ul"});new e({control:{thumb:"dot"},effect:"fade",scope:"#fade",target:"ul"})}))}();</script> </body></html>